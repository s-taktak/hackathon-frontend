{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/auth/signup":{"post":{"tags":["Auth"],"summary":"Register User","operationId":"signUp","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserMeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["Auth"],"summary":"Login","operationId":"login","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/item":{"post":{"tags":["Item"],"summary":"Post Item","operationId":"postItem","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_postItem"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Item"],"summary":"Get Items List","operationId":"getItemsList","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ItemResponse"},"title":"Response Getitemslist"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/item/{item_id}":{"put":{"tags":["Item"],"summary":"Update Item","operationId":"updateItem","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Item"],"summary":"Get Item Detail","operationId":"getItemDetail","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Item"],"summary":"Delete Item","operationId":"deleteItem","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/item/{item_id}/purchase":{"post":{"tags":["Item"],"summary":"Purchase Item","operationId":"purchaseItem","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/search":{"get":{"tags":["Search"],"summary":"Search Items","description":"AIベクトル検索を行うエンドポイント","operationId":"search","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":1,"maxLength":100,"description":"検索キーワード","title":"Q"},"description":"検索キーワード"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ItemResponse"},"title":"Response Search"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me":{"get":{"tags":["Me"],"summary":"Get My Profile","operationId":"getMyProfile","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserMeResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/me/items":{"get":{"tags":["Me"],"summary":"Get My Listings","operationId":"getMyListing","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ItemResponse"},"type":"array","title":"Response Getmylisting"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/me/purchased":{"get":{"tags":["Me"],"summary":"Get Purchased Items","operationId":"getPurchasedItems","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ItemResponse"},"type":"array","title":"Response Getpurchaseditems"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/me/history":{"get":{"tags":["Me"],"summary":"Get Browsing History","operationId":"getHistory","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/HistoryResponse"},"type":"array","title":"Response Gethistory"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/history/{item_id}":{"post":{"tags":["Me"],"summary":"Record Browsing History","operationId":"postHistory","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/item/{item_id}/comments":{"post":{"tags":["Comment"],"summary":"Post Comment","operationId":"postComment","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Comment"],"summary":"Get Comments","operationId":"getComment","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponse"},"title":"Response Getcomment"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}":{"get":{"tags":["User"],"summary":"Get User Profile","operationId":"getProfile","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/items":{"get":{"tags":["User"],"summary":"Get Users Listings","operationId":"getListing","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ItemResponse"},"title":"Response Getlisting"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/recommend":{"get":{"tags":["recommend"],"summary":"Recommend Items","operationId":"recommend","parameters":[{"name":"item_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ItemResponse"},"title":"Response Recommend"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/categories":{"get":{"tags":["category"],"summary":"Get Categories","operationId":"getCategories","parameters":[{"name":"parent_id","in":"query","required":false,"schema":{"type":"integer","title":"Parent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Category"},"title":"Response Getcategories"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/categories/search":{"get":{"tags":["category"],"summary":"Search Categories","operationId":"searchCategories","parameters":[{"name":"keyword","in":"query","required":true,"schema":{"type":"string","title":"Keyword"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CategorySearchResponse"},"title":"Response Searchcategories"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/aiSearch":{"post":{"tags":["aiSearch"],"summary":"Ai Search Endpoint","operationId":"ai_search_endpoint_aiSearch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AiSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AiSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AiSearchRequest":{"properties":{"message":{"type":"string","title":"Message"},"history":{"items":{"$ref":"#/components/schemas/ChatMessage"},"type":"array","title":"History","default":[]}},"type":"object","required":["message"],"title":"AiSearchRequest"},"AiSearchResponse":{"properties":{"reply":{"type":"string","title":"Reply"},"history":{"items":{"$ref":"#/components/schemas/ChatMessage"},"type":"array","title":"History"},"items":{"anyOf":[{"items":{"$ref":"#/components/schemas/ItemResponse"},"type":"array"},{"type":"null"}],"title":"Items","default":[]}},"type":"object","required":["reply","history"],"title":"AiSearchResponse"},"Body_login":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login"},"Body_postItem":{"properties":{"title":{"type":"string","title":"Title"},"price":{"type":"integer","title":"Price"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category_id":{"type":"integer","title":"Category Id"},"brand_id":{"type":"integer","title":"Brand Id"},"condition_id":{"type":"integer","title":"Condition Id"},"files":{"items":{"type":"string","format":"binary"},"type":"array","title":"Files","default":[]}},"type":"object","required":["title","price"],"title":"Body_postItem"},"Brand":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"}},"type":"object","required":["id","name"],"title":"Brand"},"Category":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"depth":{"type":"integer","title":"Depth"}},"type":"object","required":["id","name","depth"],"title":"Category"},"CategorySearchResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"path":{"type":"string","title":"Path"}},"type":"object","required":["id","name","path"],"title":"CategorySearchResponse"},"ChatMessage":{"properties":{"role":{"type":"string","title":"Role"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"tool_call_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tool Call Id"}},"type":"object","required":["role"],"title":"ChatMessage"},"CommentCreate":{"properties":{"content":{"type":"string","maxLength":1000,"minLength":1,"title":"Content","example":"値下げ可能ですか？"}},"type":"object","required":["content"],"title":"CommentCreate"},"CommentResponse":{"properties":{"content":{"type":"string","maxLength":1000,"minLength":1,"title":"Content","example":"値下げ可能ですか？"},"id":{"type":"string","format":"uuid","title":"Id"},"item_id":{"type":"string","format":"uuid","title":"Item Id"},"username":{"type":"string","title":"Username"},"isSeller":{"type":"boolean","title":"Isseller"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["content","id","item_id","username","isSeller","created_at"],"title":"CommentResponse"},"Condition":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"}},"type":"object","required":["id","name"],"title":"Condition"},"Gender":{"type":"string","enum":["male","female","undefined"],"title":"Gender"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoryResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"viewed_at":{"type":"string","format":"date-time","title":"Viewed At"},"item":{"anyOf":[{"$ref":"#/components/schemas/ItemSimpleResponse"},{"type":"null"}]}},"type":"object","required":["id","user_id","viewed_at"],"title":"HistoryResponse"},"ImageResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"image_url":{"type":"string","title":"Image Url"}},"type":"object","required":["id","image_url"],"title":"ImageResponse"},"ItemResponse":{"properties":{"title":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Title","example":"Nintendo Switch2"},"price":{"type":"integer","title":"Price","example":30000},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","example":"これは今大人気のゲーム機です！"},"id":{"type":"string","format":"uuid","title":"Id"},"seller":{"$ref":"#/components/schemas/UserResponse"},"status":{"$ref":"#/components/schemas/ItemStatus"},"brand":{"anyOf":[{"$ref":"#/components/schemas/Brand"},{"type":"null"}]},"category":{"anyOf":[{"$ref":"#/components/schemas/Category"},{"type":"null"}]},"condition":{"anyOf":[{"$ref":"#/components/schemas/Condition"},{"type":"null"}]},"images":{"items":{"$ref":"#/components/schemas/ImageResponse"},"type":"array","title":"Images"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","seller","status","images","created_at","updated_at"],"title":"ItemResponse"},"ItemSimpleResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"seller_id":{"type":"string","format":"uuid","title":"Seller Id"}},"type":"object","required":["id","seller_id"],"title":"ItemSimpleResponse"},"ItemStatus":{"type":"string","enum":["on_sale","sold_out","draft"],"title":"ItemStatus"},"ItemUpdate":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"price":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Price"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Category Id"},"brand_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Brand Id"},"status":{"anyOf":[{"$ref":"#/components/schemas/ItemStatus"},{"type":"null"}]}},"type":"object","title":"ItemUpdate"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","token_type"],"title":"Token"},"UserCreate":{"properties":{"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username","example":"佐藤太郎"},"gender":{"$ref":"#/components/schemas/Gender","default":"undefined"},"email":{"type":"string","format":"email","title":"Email","example":"user@example.com"},"password":{"type":"string","minLength":8,"title":"Password","example":"secret_password"},"birth_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Birth Date","example":"2000-01-01"}},"type":"object","required":["email","password"],"title":"UserCreate"},"UserMeResponse":{"properties":{"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username","example":"佐藤太郎"},"gender":{"$ref":"#/components/schemas/Gender","default":"undefined"},"id":{"type":"string","format":"uuid","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"email":{"type":"string","format":"email","title":"Email"},"birth_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Birth Date"}},"type":"object","required":["id","created_at","email","birth_date"],"title":"UserMeResponse"},"UserResponse":{"properties":{"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username","example":"佐藤太郎"},"gender":{"$ref":"#/components/schemas/Gender","default":"undefined"},"id":{"type":"string","format":"uuid","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","created_at"],"title":"UserResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/auth/login"}}}}}}